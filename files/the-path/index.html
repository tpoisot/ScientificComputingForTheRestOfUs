<!doctype html><html><head>
<meta name=viewport content="width=device-width,initial-scale=1">
<meta charset=utf-8>
<link href=/fonts/fontawesome/css/fontawesome.css rel=stylesheet>
<link href=/fonts/fontawesome/css/brands.css rel=stylesheet>
<link href=/fonts/fontawesome/css/solid.css rel=stylesheet>
<script src=https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js></script>
<script>mermaid.initialize({startOnLoad:!0,theme:"neutral",curve:"linear"})</script>
<link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/katex.min.css integrity=sha384-Xi8rHCmBmhbuyyhbI88391ZKP2dmfnOl4rT9ZfRI7mLTdk1wblIUnrIq35nqwEvC crossorigin=anonymous>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/katex.min.js integrity=sha384-X/XCfMm41VSsqRNQgDerQczD69XqmjOOOwYQvr/uuC+j4OPoNhVgjdGFwhvN02Ja crossorigin=anonymous></script>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/contrib/auto-render.min.js integrity=sha384-+XBljXPPiv+OzfbB3cVmLHf4hdUFHlWNZN5spNQ7rmHTXpd7WvJum6fIACpNNfIR crossorigin=anonymous onload=renderMathInElement(document.body)></script>
<script>document.addEventListener("DOMContentLoaded",function(){renderMathInElement(document.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1}]})})</script>
<link rel=stylesheet href=https://sciencecomputing.io/index.818233115a5ddaf75da6d0ea23b08181cba7bdd5657dda146098a1d667db9950.css>
<title>The Path · Scientific computing</title></head><body><header>
<div id=reading-bar><div id=reading-bar-inner></div></div><img class=logo src=/logo.svg>
<h1><a href=/>Scientific computing</a></h1><h2>(for the rest of us)</h2></header><main>
<h1>The Path</h1><article>
<p>One of the main obstacle to reproductible projects is issues with describing
where files are. In this module, we will talk about the path, and how to refer
to locations in a way that will work on any computer.</p><p>The first question we have to answer is, where are we? The answer to this
question is <code>pwd</code>, or <em>print working directory</em>. This is telling us where
<em>Julia</em> is actually executing things. In our case, the script for this lesson
is running in:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-julia data-lang=julia><span class=line><span class=cl><span class=n>pwd</span><span class=p>()</span>
</span></span></code></pre></div><pre tabindex=0><code>&#34;/home/runner/work/ScientificComputingForTheRestOfUs/ScientificComputingForTheRestOfUs/dist/content/07_files&#34;
</code></pre><p>The working directory is a very important concept: we can look for things
<em>within</em> it, but we cannot look for things <em>outside</em> of it. In general, it is
a good idea to have your working directory be the place where your <code>Project.toml</code>
lives, as this is the place where <em>Julia</em> will look for package information.</p><div class="callout information">This is not quite entirely true. In some very specific cases, we may
not want to store a few Gb of data in our working directory, and we will refer
to those using their absolute path; the best practice in this case is probably
to setup an environment variable to point to the data.</div><p>Why is that? The simple answer is that when you distribute your project, you
will not distribute the rest of your machine. When working on a laptop (at
home), a desktop (in the lab), and a cluster (for larger simulations), the
only certainty is that the working directory is the same; it is unlikely to be
in the same place, or to have folders outside of it organized in the same way.</p><p>For this reason, the <em>folder</em> containing our material is going to be our main
unit of organization.</p><p><em>Julia</em> has an interesting macro to refer to <em>the place where the file being
run is located</em>:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-julia data-lang=julia><span class=line><span class=cl><span class=nd>@__DIR__</span>
</span></span></code></pre></div><pre tabindex=0><code>&#34;/home/runner/work/ScientificComputingForTheRestOfUs/ScientificComputingForTheRestOfUs/dist/content/07_files&#34;
</code></pre><p>Note that this is an <em>absolute</em> path - it starts with a <code>/</code>, which is the root
of your filesystem. But the absolute path is not hard-coded! Working on a
different system, you would see a different path leading up to your
<code>@__DIR__</code>.</p><div class="callout information">In practice, there is little need to use <code>@__DIR__</code>, because we will only really
care about working within a directory, and therefore we can express paths <em>relative</em> to
this directory, where our <code>Project.toml</code> lives, which makes things a lot simpler.</div><p><em>Julia</em> can also print the actual name of the file:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-julia data-lang=julia><span class=line><span class=cl><span class=nd>@__FILE__</span>
</span></span></code></pre></div><pre tabindex=0><code>&#34;/home/runner/work/ScientificComputingForTheRestOfUs/ScientificComputingForTheRestOfUs/dist/content/07_files/01_path.md&#34;
</code></pre><p>Another important concept is the home directory, which is where the operating
system will put your user files:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-julia data-lang=julia><span class=line><span class=cl><span class=n>homedir</span><span class=p>()</span>
</span></span></code></pre></div><pre tabindex=0><code>&#34;/home/runner&#34;
</code></pre><p>Paths are made of different parts, so we can splith <code>@__FILE__</code> into its
components:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-julia data-lang=julia><span class=line><span class=cl><span class=n>splitpath</span><span class=p>(</span><span class=nd>@__FILE__</span><span class=p>)</span>
</span></span></code></pre></div><pre tabindex=0><code>10-element Vector{String}:
 &#34;/&#34;
 &#34;home&#34;
 &#34;runner&#34;
 &#34;work&#34;
 &#34;ScientificComputingForTheRestOfUs&#34;
 &#34;ScientificComputingForTheRestOfUs&#34;
 &#34;dist&#34;
 &#34;content&#34;
 &#34;07_files&#34;
 &#34;01_path.md&#34;
</code></pre><p>This is quite nice, because it turned our path into an array of strings.
Notice that it&rsquo;s making a difference between <code>/</code> meaning the root, and <code>/</code>
meaning the filesystem separator.</p><p>Can we create a path in a safe way? Absolutely! Let us create a <code>data</code> folder:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-julia data-lang=julia><span class=line><span class=cl><span class=n>data_path</span> <span class=o>=</span> <span class=n>joinpath</span><span class=p>(</span><span class=n>pwd</span><span class=p>(),</span> <span class=s>&#34;data&#34;</span><span class=p>)</span>
</span></span></code></pre></div><pre tabindex=0><code>&#34;/home/runner/work/ScientificComputingForTheRestOfUs/ScientificComputingForTheRestOfUs/dist/content/07_files/data&#34;
</code></pre><p>Now, this folder does not exist. It is a string of text describing where it
is. Can we create it? Yes! But first, let&rsquo;s try a few functions:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-julia data-lang=julia><span class=line><span class=cl><span class=n>isfile</span><span class=p>(</span><span class=nd>@__DIR__</span><span class=p>)</span>
</span></span></code></pre></div><pre tabindex=0><code>false
</code></pre><div class=highlight><pre tabindex=0 class=chroma><code class=language-julia data-lang=julia><span class=line><span class=cl><span class=n>isdir</span><span class=p>(</span><span class=nd>@__DIR__</span><span class=p>)</span>
</span></span></code></pre></div><pre tabindex=0><code>true
</code></pre><div class=highlight><pre tabindex=0 class=chroma><code class=language-julia data-lang=julia><span class=line><span class=cl><span class=n>ispath</span><span class=p>(</span><span class=nd>@__DIR__</span><span class=p>)</span>
</span></span></code></pre></div><pre tabindex=0><code>true
</code></pre><p>These three functions are very useful when working on path issues. <code>isfile</code>
will take a string, and let you know if there is a <em>file</em> at this location.
<code>isdir</code> will do the same for a directory (folder; we will stick to <em>directory</em>
as it is the more correct term). <code>ispath</code> will do the same for <em>either</em> a
folder or a file.</p><p>In our case, we want <code>data_path</code> to be a directory, so we will first check
that it does not exists:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-julia data-lang=julia><span class=line><span class=cl><span class=n>isdir</span><span class=p>(</span><span class=n>data_path</span><span class=p>)</span>
</span></span></code></pre></div><pre tabindex=0><code>false
</code></pre><p>If it does not exist, we will create it:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-julia data-lang=julia><span class=line><span class=cl><span class=k>if</span> <span class=o>~</span><span class=n>isdir</span><span class=p>(</span><span class=n>data_path</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>mkdir</span><span class=p>(</span><span class=n>data_path</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=k>end</span>
</span></span></code></pre></div><pre tabindex=0><code>&#34;/home/runner/work/ScientificComputingForTheRestOfUs/ScientificComputingForTheRestOfUs/dist/content/07_files/data&#34;
</code></pre><p>This line (we will go into the details of <code>if</code>, and booleans more broadly, in
the next few modules) will create the directory if it does not exist. We can
now read the content of our working directory:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-julia data-lang=julia><span class=line><span class=cl><span class=n>readdir</span><span class=p>(</span><span class=n>pwd</span><span class=p>())</span>
</span></span></code></pre></div><pre tabindex=0><code>1-element Vector{String}:
 &#34;data&#34;
</code></pre><p>There seems to be a <code>data</code> directory. Note that <code>readdir</code> has a number of
options, and that <em>Julia</em> offers additional ways to walk through a series of
nested directories if neede.</p><div class="callout warning">There is an important difference between <code>mkpath</code> and <code>mkdir</code>. The
first will create <em>all</em> intermediate folders, allowing to create, for example,
<code>data/experiments/pilot</code> at once, whereas <code>mkdir</code> can only create <em>one</em> directory
at a time.</div><p>To finish up, let&rsquo;s remove this directory. We will use <code>isdir</code> again because
we do not want to remove a directory that doesn&rsquo;t exist. It is worth looking
at the documentation for <code>rm</code>, as it has a number of important options and
keyword arguments.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-julia data-lang=julia><span class=line><span class=cl><span class=k>if</span> <span class=n>isdir</span><span class=p>(</span><span class=n>data_path</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>rm</span><span class=p>(</span><span class=n>data_path</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=k>end</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>readdir</span><span class=p>(</span><span class=n>pwd</span><span class=p>())</span>
</span></span></code></pre></div><pre tabindex=0><code>String[]
</code></pre><p>As a final bit of information, <em>Julia</em> can create temporary files, <em>i.e.</em>
files that will not be stored in the working directory, and will not persist
after you restart your computer. Your temporary files are always stored in the
<code>tempdir</code> of your computer:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-julia data-lang=julia><span class=line><span class=cl><span class=n>tempdir</span><span class=p>()</span>
</span></span></code></pre></div><pre tabindex=0><code>&#34;/tmp&#34;
</code></pre><p>You can generate a temporary path with:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-julia data-lang=julia><span class=line><span class=cl><span class=n>tempname</span><span class=p>()</span>
</span></span></code></pre></div><pre tabindex=0><code>&#34;/tmp/jl_EtSjOrk9sr&#34;
</code></pre><p>Note that this string describes just this: a path. You can turn it into a
file, or a directory. Working with temporary files is very useful when you,
for example, need to download data in bulk, but do not want to save the raw
download.</p></article></main><footer>
<div class=wrapper>
<a href=/about/>About this project</a>
<a href=https://github.com/tpoisot/ScientificComputingForTheRestOfUs target=_blank>See the project on GitHub</a>
<a href="https://github.com/tpoisot/ScientificComputingForTheRestOfUs/issues/new?labels=section-files,module-path,status-rc,feedback&assignees=@tpoisot&title=ADD%20A%20DESCRIPTIVE%20TITLE&body=%20**Description%20of%20your%20problem/comments**%0a%0a%0a%0a---%0a*Do%20not%20edit%20below%20this%20point*%0a%0a[%f0%9f%92%bb%20SOURCE][src]%0a%0a[src]:%20https://github.com/tpoisot/ScientificComputingForTheRestOfUs/blob/main/content/07_files/01_path.jl%0a%0a[%f0%9f%93%94%20PAGE][prm]%0a%0a[prm]:%20https://sciencecomputing.io/files/the-path/%0a%0a%f0%9f%93%a6%20section-files%0a%0a%f0%9f%8f%b7%ef%b8%8f%20module-path" target=_blank>Provide feedback on this module</a>
<a href=https://creativecommons.org/licenses/by/4.0/ target=_blank>CC-BY 4.0 (Timothée Poisot)</a>
</div></footer></body><script>const readingBarInner=document.querySelector("#reading-bar-inner");document.addEventListener("scroll",function(){let e=(document.body.scrollTop||document.documentElement.scrollTop)/(document.documentElement.scrollHeight-document.documentElement.clientHeight)*100;readingBarInner.style.setProperty("width",e+"%")})</script>
</html>