<!doctype html><html><head>
<meta name=viewport content="width=device-width,initial-scale=1">
<meta charset=utf-8>
<link href=/fonts/fontawesome/css/fontawesome.css rel=stylesheet>
<link href=/fonts/fontawesome/css/brands.css rel=stylesheet>
<link href=/fonts/fontawesome/css/solid.css rel=stylesheet>
<script src=https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js></script>
<script>mermaid.initialize({startOnLoad:!0,theme:"neutral",curve:"linear"})</script>
<link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/katex.min.css integrity=sha384-Xi8rHCmBmhbuyyhbI88391ZKP2dmfnOl4rT9ZfRI7mLTdk1wblIUnrIq35nqwEvC crossorigin=anonymous>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/katex.min.js integrity=sha384-X/XCfMm41VSsqRNQgDerQczD69XqmjOOOwYQvr/uuC+j4OPoNhVgjdGFwhvN02Ja crossorigin=anonymous></script>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/contrib/auto-render.min.js integrity=sha384-+XBljXPPiv+OzfbB3cVmLHf4hdUFHlWNZN5spNQ7rmHTXpd7WvJum6fIACpNNfIR crossorigin=anonymous onload=renderMathInElement(document.body)></script>
<script>document.addEventListener("DOMContentLoaded",function(){renderMathInElement(document.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1}]})})</script>
<link rel=stylesheet href=https://sciencecomputing.io/index.818233115a5ddaf75da6d0ea23b08181cba7bdd5657dda146098a1d667db9950.css>
<title>The ternary operator · Scientific computing</title></head><body><header>
<div id=reading-bar><div id=reading-bar-inner></div></div><img class=logo src=/logo.svg>
<h1><a href=/>Scientific computing</a></h1><h2>(for the rest of us)</h2></header><main>
<h1>The ternary operator</h1><article>
<p>In this module, we will look at the &ldquo;ternary operator&rdquo;, a very efficient
shortcut to perform a logical test in a single line. This is a construct we
will use quite a lot to express both possible outcomes of a conditional expression using
a single line!</p><p>Based on what we have seen in the previous modules, the way to store different
values in a variable according to some condition we set would be to write
something like:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-julia data-lang=julia><span class=line><span class=cl><span class=n>x</span><span class=o>::</span><span class=kt>Float64</span> <span class=o>=</span> <span class=mf>0.0</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=n>rand</span><span class=p>()</span> <span class=o>&lt;</span> <span class=mf>0.5</span>
</span></span><span class=line><span class=cl>    <span class=n>x</span> <span class=o>=</span> <span class=mf>0.25</span>
</span></span><span class=line><span class=cl><span class=k>else</span>
</span></span><span class=line><span class=cl>    <span class=n>x</span> <span class=o>=</span> <span class=mf>0.75</span>
</span></span><span class=line><span class=cl><span class=k>end</span>
</span></span></code></pre></div><pre tabindex=0><code>0.75
</code></pre><p>In the words of Stephen King, &ldquo;it goes somewhere, but it ain&rsquo;t, you know,
<em>boss</em>&rdquo;. Thankfully there is a way to simplify this expression greatly, and it
does of course involve learning some more operators.</p><p>But before we start doing this, as a little bit of recall from the previous module, note
that we can do the same thing with short-circuit operators:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-julia data-lang=julia><span class=line><span class=cl><span class=n>x</span> <span class=o>=</span> <span class=mf>0.75</span>
</span></span><span class=line><span class=cl><span class=n>rand</span><span class=p>()</span> <span class=o>&lt;</span> <span class=mf>0.5</span> <span class=o>&amp;&amp;</span> <span class=p>(</span><span class=n>x</span> <span class=o>=</span> <span class=mf>0.25</span><span class=p>)</span>
</span></span></code></pre></div><pre tabindex=0><code>false
</code></pre><p>But there is a reason why we don&rsquo;t do everything we technically can, and in this instance,
the reason is that this notation is absolutely vile. So we will address our problem in
a more elegant way, using the <em>ternary operator</em>:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-julia data-lang=julia><span class=line><span class=cl><span class=n>x</span> <span class=o>=</span> <span class=n>rand</span><span class=p>()</span> <span class=o>&lt;</span> <span class=mf>0.5</span> <span class=o>?</span> <span class=mf>0.25</span> <span class=o>:</span> <span class=mf>0.75</span>
</span></span></code></pre></div><pre tabindex=0><code>0.25
</code></pre><p>This little <code>=</code>/<code>?</code>/<code>:</code> sequence is called a ternary operator. The basic syntax is <code>condition ? if true : if false</code>. It fits in a single line, and we can handle both cases. Note that
the cases are <em>returned</em> as a function of whether the condition is satisfied,
which is a way to rapidly give a value to a variable.</p><p>Another source of efficiency is that both sides of the <code>:</code> are <em>not</em>
evaluated, unlike other languages:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-julia data-lang=julia><span class=line><span class=cl><span class=nb>true</span> <span class=o>?</span> <span class=n>print</span><span class=p>(</span><span class=mi>2</span><span class=p>)</span> <span class=o>:</span> <span class=n>print</span><span class=p>(</span><span class=mi>3</span><span class=p>)</span>
</span></span></code></pre></div><pre tabindex=0><code>2
</code></pre><p>We can check this using the <code>@lower</code> macro from <span class="package no-hub"><span class=pkgname>Meta</span></span>: it is translating
<em>Julia</em> code into something of a lower-level, and is an interesting
opportunity to check what is going on &ldquo;under the hood&rdquo;:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-julia data-lang=julia><span class=line><span class=cl><span class=n>Meta</span><span class=o>.</span><span class=nd>@lower</span> <span class=nb>true</span> <span class=o>?</span> <span class=n>cos</span><span class=p>(</span><span class=mi>4</span><span class=p>)</span> <span class=o>:</span> <span class=n>sin</span><span class=p>(</span><span class=mi>3</span><span class=p>)</span>
</span></span></code></pre></div><pre tabindex=0><code>:($(Expr(:thunk, CodeInfo(
    @ none within `top-level scope`
1 ─      goto #3 if not true
2 ─ %2 = cos(4)
└──      return %2
3 ─ %4 = sin(3)
└──      return %4
))))
</code></pre><p>We see in the output above that the <em>operations</em> (like <code>cos(4)</code>) have <em>not</em>
been expanded yet &ndash; the ternary operator is &ldquo;pointing&rdquo; <em>Julia</em> towards the
right branch.</p><p>We can use the ternary operator as the most basic ingredient in a very naive
function that reproduces the Kronecker $\delta$ function: it returns 1 if the
two inputs are equal, and 0 if they are not. This function is generally
applied to non-negative integers.</p><div class="callout information">Of course, if we wanted to do this properly, we could remember that
<code>false</code> <em>is</em> 0 and <code>true</code> <em>is</em> 1, and our function is not necessary.
Nevertheless, this is an interesting example to write from scratch:</div><div class=highlight><pre tabindex=0 class=chroma><code class=language-julia data-lang=julia><span class=line><span class=cl><span class=k>function</span> <span class=n>δ</span><span class=p>(</span><span class=n>i</span><span class=o>::</span><span class=kt>T</span><span class=p>,</span> <span class=n>j</span><span class=o>::</span><span class=kt>T</span><span class=p>)</span> <span class=k>where</span> <span class=p>{</span><span class=kt>T</span> <span class=o>&lt;:</span> <span class=kt>Integer</span><span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>i</span> <span class=o>==</span> <span class=n>j</span> <span class=o>?</span> <span class=n>one</span><span class=p>(</span><span class=n>T</span><span class=p>)</span> <span class=o>:</span> <span class=n>zero</span><span class=p>(</span><span class=n>T</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=k>end</span>
</span></span></code></pre></div><pre tabindex=0><code>δ (generic function with 1 method)
</code></pre><div class="callout warning">We have not yet covered how to declare functions, and how to handle the types
of arguments. This will happen later in the material. For now, just trust us when we say
that all of the bits that aren&rsquo;t the ternary operator are required for a function to run.</div><p>We can see what our function would do when applied to actual numbers:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-julia data-lang=julia><span class=line><span class=cl><span class=k>for</span> <span class=n>i</span> <span class=k>in</span> <span class=mi>1</span><span class=o>:</span><span class=mi>3</span><span class=p>,</span> <span class=n>j</span> <span class=k>in</span> <span class=mi>1</span><span class=o>:</span><span class=mi>3</span>
</span></span><span class=line><span class=cl>    <span class=nd>@info</span> <span class=s>&#34;δ(</span><span class=si>$</span><span class=p>(</span><span class=n>i</span><span class=p>)</span><span class=s>, </span><span class=si>$</span><span class=p>(</span><span class=n>j</span><span class=p>)</span><span class=s>) = </span><span class=si>$</span><span class=p>(</span><span class=n>δ</span><span class=p>(</span><span class=n>i</span><span class=p>,</span> <span class=n>j</span><span class=p>))</span><span class=s>&#34;</span>
</span></span><span class=line><span class=cl><span class=k>end</span>
</span></span></code></pre></div><pre tabindex=0><code>[ Info: δ(1, 1) = 1
[ Info: δ(1, 2) = 0
[ Info: δ(1, 3) = 0
[ Info: δ(2, 1) = 0
[ Info: δ(2, 2) = 1
[ Info: δ(2, 3) = 0
[ Info: δ(3, 1) = 0
[ Info: δ(3, 2) = 0
[ Info: δ(3, 3) = 1
</code></pre></article></main><footer>
<div class=wrapper>
<a href=/about/>About this project</a>
<a href=https://github.com/tpoisot/ScientificComputingForTheRestOfUs target=_blank>See the project on GitHub</a>
<a href="https://github.com/tpoisot/ScientificComputingForTheRestOfUs/issues/new?labels=section-fundamentals,module-ternary,status-rc,feedback&assignees=@tpoisot&title=ADD%20A%20DESCRIPTIVE%20TITLE&body=%20**Description%20of%20your%20problem/comments**%0a%0a%0a%0a---%0a*Do%20not%20edit%20below%20this%20point*%0a%0a[%f0%9f%92%bb%20SOURCE][src]%0a%0a[src]:%20https://github.com/tpoisot/ScientificComputingForTheRestOfUs/blob/main/content/01_fundamentals/05_ternary.jl%0a%0a[%f0%9f%93%94%20PAGE][prm]%0a%0a[prm]:%20https://sciencecomputing.io/fundamentals/the-ternary-operator/%0a%0a%f0%9f%93%a6%20section-fundamentals%0a%0a%f0%9f%8f%b7%ef%b8%8f%20module-ternary" target=_blank>Provide feedback on this module</a>
<a href=https://creativecommons.org/licenses/by/4.0/ target=_blank>CC-BY 4.0 (Timothée Poisot)</a>
</div></footer></body><script>const readingBarInner=document.querySelector("#reading-bar-inner");document.addEventListener("scroll",function(){let e=(document.body.scrollTop||document.documentElement.scrollTop)/(document.documentElement.scrollHeight-document.documentElement.clientHeight)*100;readingBarInner.style.setProperty("width",e+"%")})</script>
</html>